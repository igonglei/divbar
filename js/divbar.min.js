!function(t,o){"use strict";"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof module&&"object"==typeof module.exports?module.exports=o(require("jquery")):t.divbar=o(t.jQuery)}(this,function(t){var o={borderColor:"#2D4A34",borderWidth:1,borderStyle:"solid",direction:"top",margin:2,divs:15,color:["#486F14,#8EC63F,47%","#539102,#8DC53E,14%","#D9B404,#FFA800,14%","#D64C01,#D84C00,25%"],value:0,animation:!0,duration:100,beat:3,beatDuration:100},i={name:"divbar",init:function(o){for(var i=t(o.dom).empty(),r=o.options,n=r.divs,e=r.margin,a="right"===r.direction,s=(a?i.width():i.height())/n-e,d=0;d<n;d++)i.append("<div></div>");var c=i.children();c.css({"border-color":r.borderColor,"border-width":r.borderWidth,"border-style":r.borderStyle,float:a?"right":"left",width:"100%",height:"100%","box-sizing":"border-box",transition:"all .1s ease-in-out"}),c.css(a?"width":"height",s),c.css(a?"margin-right":"margin-bottom",e),this.fillColor(o,c,r)},fillColor:function(t,o,i){for(var r=this,n=i.divs,e=Math.ceil(i.value*n),a=this.getColor(i.color,n),s=i.animation,d=i.duration,c=function(t){o.eq(n-t-1).css(a[t])},u=function(){r.beat(t,o,e,a)},f=0;f<e;f++)s?function(t){setTimeout(function(){c(t)},d*t)}(f):c(f);s?setTimeout(u,d*e):u()},getColor:function(o,i){var r=this,n=[];return t.each(o,function(t,o){for(var e=o.split(","),a=e[0],s=e[1],d=Math.round(r.parsePercent(e[2])*i),c=0;c<d;c++)n.push({"background-color":a,"border-color":s})}),n},parsePercent:function(t){return t.replace(/%$/g,"")/100},beat:function(t,o,i,r){var n=t.options,e=n.beat;if(!(e<=0)){var a=n.divs,s=Math.max(0,i-e-1),d=Math.min(a,i+e),c=i,u=!0,f={"background-color":"","border-color":n.borderColor};t.interval=setInterval(function(){c===d?(u=!1,c--):c===s&&(u=!0,c++);var t=u?r[c]||{}:f;o.eq(a-c-1).css(t),u?c++:c--},n.beatDuration)}}},r=function(i,r){this.dom=i,this.options=t.extend({},o,r),this.init()};return r.prototype={constructor:r,init:function(){i.init(this)}},t.fn.divbar=function(o,n){return"string"==typeof o?t.fn.divbar.methods[o](this[0],n):this.each(function(){var n=new r(this,o);return t.data(this,i.name,n),n})},t.fn.divbar.methods={instance:function(o){return t.data(o,i.name)},options:function(t){return this.instance(t).options}},t.fn.divbar.defaults=o,r});